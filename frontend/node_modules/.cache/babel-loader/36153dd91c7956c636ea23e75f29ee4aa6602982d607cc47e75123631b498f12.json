{"ast":null,"code":"import _objectSpread from\"C:/Users/ruya/event-management-platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import Navbar from'../components/Navbar';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{const[events,setEvents]=useState([]);const[error,setError]=useState('');const[rsvpStatus,setRsvpStatus]=useState({});const[toast,setToast]=useState({visible:false,message:'',variant:''});const token=localStorage.getItem('token');useEffect(()=>{const fetchEvents=async()=>{try{const res=await axios.get('/api/v1/events/',{headers:{Authorization:\"Token \".concat(token)}});setEvents(res.data);}catch(_unused){setError('Failed to load events. Please ensure you are logged in.');}};fetchEvents();},[token]);const handleRSVP=async eventId=>{try{await axios.post('/api/v1/attendance/',{event:eventId},{headers:{Authorization:\"Token \".concat(token)}});setRsvpStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[eventId]:true}));setToast({visible:true,message:'ðŸŽ‰ RSVP successful!',variant:'success'});}catch(_unused2){setToast({visible:true,message:'âš ï¸ RSVP failed. Try again later.',variant:'danger'});}};const closeToast=()=>{setToast({visible:false,message:'',variant:''});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"toast align-items-center text-white bg-\".concat(toast.variant,\" border-0 position-fixed\"),role:\"alert\",style:{top:'1rem',right:'1rem',display:toast.visible?'flex':'none'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"toast-body\",children:toast.message}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close btn-close-white me-2 m-auto\",\"aria-label\":\"Close\",onClick:closeToast})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4 text-center\",style:{color:'#4B0082'},children:\"Welcome to Your Dashboard\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger text-center\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[events.map(event=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-4 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card shadow h-100 border-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",style:{color:'#4B0082'},children:event.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text text-muted\",children:event.description}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-secondary mb-2 d-block\",children:[event.start_time,\" \\u2192 \",event.end_time]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm text-white\",style:{backgroundColor:'#FF6F61'},onClick:()=>handleRSVP(event.id),disabled:!!rsvpStatus[event.id],children:rsvpStatus[event.id]?'RSVPed':'RSVP'})]})})},event.id)),!events.length&&!error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-muted\",children:\"No events available.\"})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","Navbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","events","setEvents","error","setError","rsvpStatus","setRsvpStatus","toast","setToast","visible","message","variant","token","localStorage","getItem","fetchEvents","res","get","headers","Authorization","concat","data","_unused","handleRSVP","eventId","post","event","prev","_objectSpread","_unused2","closeToast","children","className","role","style","top","right","display","type","onClick","color","map","title","description","start_time","end_time","backgroundColor","id","disabled","length"],"sources":["C:/Users/ruya/event-management-platform/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Navbar from '../components/Navbar';\r\n\r\nconst Dashboard = () => {\r\n  const [events, setEvents] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [rsvpStatus, setRsvpStatus] = useState({});\r\n  const [toast, setToast] = useState({ visible: false, message: '', variant: '' });\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    const fetchEvents = async () => {\r\n      try {\r\n        const res = await axios.get('/api/v1/events/', {\r\n          headers: { Authorization: `Token ${token}` },\r\n        });\r\n        setEvents(res.data);\r\n      } catch {\r\n        setError('Failed to load events. Please ensure you are logged in.');\r\n      }\r\n    };\r\n\r\n    fetchEvents();\r\n  }, [token]);\r\n\r\n  const handleRSVP = async (eventId) => {\r\n    try {\r\n      await axios.post(\r\n        '/api/v1/attendance/',\r\n        { event: eventId },\r\n        {\r\n          headers: {\r\n            Authorization: `Token ${token}`,\r\n          },\r\n        }\r\n      );\r\n      setRsvpStatus((prev) => ({ ...prev, [eventId]: true }));\r\n      setToast({ visible: true, message: 'ðŸŽ‰ RSVP successful!', variant: 'success' });\r\n    } catch {\r\n      setToast({ visible: true, message: 'âš ï¸ RSVP failed. Try again later.', variant: 'danger' });\r\n    }\r\n  };\r\n\r\n  const closeToast = () => {\r\n    setToast({ visible: false, message: '', variant: '' });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n\r\n      {/* Toast Notification */}\r\n      <div\r\n        className={`toast align-items-center text-white bg-${toast.variant} border-0 position-fixed`}\r\n        role=\"alert\"\r\n        style={{ top: '1rem', right: '1rem', display: toast.visible ? 'flex' : 'none' }}\r\n      >\r\n        <div className=\"d-flex\">\r\n          <div className=\"toast-body\">{toast.message}</div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn-close btn-close-white me-2 m-auto\"\r\n            aria-label=\"Close\"\r\n            onClick={closeToast}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"container py-4\">\r\n        <h2 className=\"mb-4 text-center\" style={{ color: '#4B0082' }}>\r\n          Welcome to Your Dashboard\r\n        </h2>\r\n        {error && <p className=\"text-danger text-center\">{error}</p>}\r\n\r\n        <div className=\"row\">\r\n          {events.map((event) => (\r\n            <div className=\"col-md-6 col-lg-4 mb-4\" key={event.id}>\r\n              <div className=\"card shadow h-100 border-0\">\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\" style={{ color: '#4B0082' }}>\r\n                    {event.title}\r\n                  </h5>\r\n                  <p className=\"card-text text-muted\">{event.description}</p>\r\n                  <span className=\"badge bg-secondary mb-2 d-block\">\r\n                    {event.start_time} â†’ {event.end_time}\r\n                  </span>\r\n                  <button\r\n                    className=\"btn btn-sm text-white\"\r\n                    style={{ backgroundColor: '#FF6F61' }}\r\n                    onClick={() => handleRSVP(event.id)}\r\n                    disabled={!!rsvpStatus[event.id]}\r\n                  >\r\n                    {rsvpStatus[event.id] ? 'RSVPed' : 'RSVP'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {!events.length && !error && (\r\n            <p className=\"text-center text-muted\">No events available.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"qIAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1C,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACc,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAAC,CAAC,CAChD,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,CAAEkB,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAG,CAAC,CAAC,CAChF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3CxB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAyB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAxB,KAAK,CAACyB,GAAG,CAAC,iBAAiB,CAAE,CAC7CC,OAAO,CAAE,CAAEC,aAAa,UAAAC,MAAA,CAAWR,KAAK,CAAG,CAC7C,CAAC,CAAC,CACFV,SAAS,CAACc,GAAG,CAACK,IAAI,CAAC,CACrB,CAAE,MAAAC,OAAA,CAAM,CACNlB,QAAQ,CAAC,yDAAyD,CAAC,CACrE,CACF,CAAC,CAEDW,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,CAACH,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAW,UAAU,CAAG,KAAO,CAAAC,OAAO,EAAK,CACpC,GAAI,CACF,KAAM,CAAAhC,KAAK,CAACiC,IAAI,CACd,qBAAqB,CACrB,CAAEC,KAAK,CAAEF,OAAQ,CAAC,CAClB,CACEN,OAAO,CAAE,CACPC,aAAa,UAAAC,MAAA,CAAWR,KAAK,CAC/B,CACF,CACF,CAAC,CACDN,aAAa,CAAEqB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAWD,IAAI,MAAE,CAACH,OAAO,EAAG,IAAI,EAAG,CAAC,CACvDhB,QAAQ,CAAC,CAAEC,OAAO,CAAE,IAAI,CAAEC,OAAO,CAAE,qBAAqB,CAAEC,OAAO,CAAE,SAAU,CAAC,CAAC,CACjF,CAAE,MAAAkB,QAAA,CAAM,CACNrB,QAAQ,CAAC,CAAEC,OAAO,CAAE,IAAI,CAAEC,OAAO,CAAE,kCAAkC,CAAEC,OAAO,CAAE,QAAS,CAAC,CAAC,CAC7F,CACF,CAAC,CAED,KAAM,CAAAmB,UAAU,CAAGA,CAAA,GAAM,CACvBtB,QAAQ,CAAC,CAAEC,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAG,CAAC,CAAC,CACxD,CAAC,CAED,mBACEd,KAAA,CAAAE,SAAA,EAAAgC,QAAA,eACEpC,IAAA,CAACF,MAAM,GAAE,CAAC,cAGVE,IAAA,QACEqC,SAAS,2CAAAZ,MAAA,CAA4Cb,KAAK,CAACI,OAAO,4BAA2B,CAC7FsB,IAAI,CAAC,OAAO,CACZC,KAAK,CAAE,CAAEC,GAAG,CAAE,MAAM,CAAEC,KAAK,CAAE,MAAM,CAAEC,OAAO,CAAE9B,KAAK,CAACE,OAAO,CAAG,MAAM,CAAG,MAAO,CAAE,CAAAsB,QAAA,cAEhFlC,KAAA,QAAKmC,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACrBpC,IAAA,QAAKqC,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAExB,KAAK,CAACG,OAAO,CAAM,CAAC,cACjDf,IAAA,WACE2C,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,uCAAuC,CACjD,aAAW,OAAO,CAClBO,OAAO,CAAET,UAAW,CACrB,CAAC,EACC,CAAC,CACH,CAAC,cAENjC,KAAA,QAAKmC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC7BpC,IAAA,OAAIqC,SAAS,CAAC,kBAAkB,CAACE,KAAK,CAAE,CAAEM,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,CAAC,2BAE9D,CAAI,CAAC,CACJ5B,KAAK,eAAIR,IAAA,MAAGqC,SAAS,CAAC,yBAAyB,CAAAD,QAAA,CAAE5B,KAAK,CAAI,CAAC,cAE5DN,KAAA,QAAKmC,SAAS,CAAC,KAAK,CAAAD,QAAA,EACjB9B,MAAM,CAACwC,GAAG,CAAEf,KAAK,eAChB/B,IAAA,QAAKqC,SAAS,CAAC,wBAAwB,CAAAD,QAAA,cACrCpC,IAAA,QAAKqC,SAAS,CAAC,4BAA4B,CAAAD,QAAA,cACzClC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBpC,IAAA,OAAIqC,SAAS,CAAC,YAAY,CAACE,KAAK,CAAE,CAAEM,KAAK,CAAE,SAAU,CAAE,CAAAT,QAAA,CACpDL,KAAK,CAACgB,KAAK,CACV,CAAC,cACL/C,IAAA,MAAGqC,SAAS,CAAC,sBAAsB,CAAAD,QAAA,CAAEL,KAAK,CAACiB,WAAW,CAAI,CAAC,cAC3D9C,KAAA,SAAMmC,SAAS,CAAC,iCAAiC,CAAAD,QAAA,EAC9CL,KAAK,CAACkB,UAAU,CAAC,UAAG,CAAClB,KAAK,CAACmB,QAAQ,EAChC,CAAC,cACPlD,IAAA,WACEqC,SAAS,CAAC,uBAAuB,CACjCE,KAAK,CAAE,CAAEY,eAAe,CAAE,SAAU,CAAE,CACtCP,OAAO,CAAEA,CAAA,GAAMhB,UAAU,CAACG,KAAK,CAACqB,EAAE,CAAE,CACpCC,QAAQ,CAAE,CAAC,CAAC3C,UAAU,CAACqB,KAAK,CAACqB,EAAE,CAAE,CAAAhB,QAAA,CAEhC1B,UAAU,CAACqB,KAAK,CAACqB,EAAE,CAAC,CAAG,QAAQ,CAAG,MAAM,CACnC,CAAC,EACN,CAAC,CACH,CAAC,EAnBqCrB,KAAK,CAACqB,EAoB9C,CACN,CAAC,CACD,CAAC9C,MAAM,CAACgD,MAAM,EAAI,CAAC9C,KAAK,eACvBR,IAAA,MAAGqC,SAAS,CAAC,wBAAwB,CAAAD,QAAA,CAAC,sBAAoB,CAAG,CAC9D,EACE,CAAC,EACH,CAAC,EACN,CAAC,CAEP,CAAC,CAED,cAAe,CAAA/B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}