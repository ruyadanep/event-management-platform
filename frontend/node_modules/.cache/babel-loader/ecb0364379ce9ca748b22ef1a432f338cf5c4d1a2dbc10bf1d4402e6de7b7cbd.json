{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import Navbar from'../components/Navbar';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Profile=()=>{const[profile,setProfile]=useState(null);const[rsvps,setRsvps]=useState([]);const[error,setError]=useState('');const[search,setSearch]=useState('');const[ordering,setOrdering]=useState('event__start_time');const[page,setPage]=useState(1);const[count,setCount]=useState(0);const token=localStorage.getItem('token');const fetchProfile=async()=>{try{const res=await axios.get('/api/v1/profile/',{headers:{Authorization:\"Token \".concat(token)}});setProfile(res.data);}catch(_unused){setError('Failed to load profile.');}};const fetchRSVPs=async()=>{try{const res=await axios.get(\"/api/v1/attendance/\",{headers:{Authorization:\"Token \".concat(token)},params:{search,ordering,page}});setRsvps(res.data.results);setCount(res.data.count);}catch(_unused2){setError('Failed to load RSVP history.');}};useEffect(()=>{fetchProfile();},[]);useEffect(()=>{fetchRSVPs();},[search,ordering,page]);const totalPages=Math.ceil(count/10);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",style:{color:'#4B0082'},children:\"My Profile\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger text-center\",children:error}),profile&&/*#__PURE__*/_jsx(\"div\",{className:\"card shadow-sm mx-auto mb-5\",style:{maxWidth:'400px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",style:{color:'#4B0082'},children:[\"Hello, \",profile.username]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",profile.email]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"User ID:\"}),\" \",profile.id]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control w-50\",placeholder:\"Search RSVPs...\",value:search,onChange:e=>setSearch(e.target.value),style:{borderColor:'#4B0082'}}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select w-25 ms-3\",value:ordering,onChange:e=>setOrdering(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"event__start_time\",children:\"Sort: Start Time \\u2191\"}),/*#__PURE__*/_jsx(\"option\",{value:\"-event__start_time\",children:\"Sort: Start Time \\u2193\"}),/*#__PURE__*/_jsx(\"option\",{value:\"event__title\",children:\"Sort: Title A-Z\"}),/*#__PURE__*/_jsx(\"option\",{value:\"-event__title\",children:\"Sort: Title Z-A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[rsvps.map(entry=>{var _entry$event,_entry$event2,_entry$event3,_entry$event4;return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-4 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100 border-0 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",style:{color:'#4B0082'},children:(_entry$event=entry.event)===null||_entry$event===void 0?void 0:_entry$event.title}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text text-muted\",children:(_entry$event2=entry.event)===null||_entry$event2===void 0?void 0:_entry$event2.description}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-secondary\",children:[(_entry$event3=entry.event)===null||_entry$event3===void 0?void 0:_entry$event3.start_time,\" \\u2192 \",(_entry$event4=entry.event)===null||_entry$event4===void 0?void 0:_entry$event4.end_time]})]})})},entry.id);}),!rsvps.length&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-muted\",children:\"No RSVP history yet.\"})]}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-4\",children:/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsx(\"ul\",{className:\"pagination\",children:[...Array(totalPages)].map((_,i)=>/*#__PURE__*/_jsx(\"li\",{className:\"page-item \".concat(page===i+1?'active':''),children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:()=>setPage(i+1),children:i+1})},i))})})})]})]});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","axios","Navbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","profile","setProfile","rsvps","setRsvps","error","setError","search","setSearch","ordering","setOrdering","page","setPage","count","setCount","token","localStorage","getItem","fetchProfile","res","get","headers","Authorization","concat","data","_unused","fetchRSVPs","params","results","_unused2","totalPages","Math","ceil","children","className","style","color","maxWidth","username","email","id","type","placeholder","value","onChange","e","target","borderColor","map","entry","_entry$event","_entry$event2","_entry$event3","_entry$event4","event","title","description","start_time","end_time","length","Array","_","i","onClick"],"sources":["C:/Users/ruya/event-management-platform/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Navbar from '../components/Navbar';\r\n\r\nconst Profile = () => {\r\n  const [profile, setProfile] = useState(null);\r\n  const [rsvps, setRsvps] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [search, setSearch] = useState('');\r\n  const [ordering, setOrdering] = useState('event__start_time');\r\n  const [page, setPage] = useState(1);\r\n  const [count, setCount] = useState(0);\r\n  const token = localStorage.getItem('token');\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n      const res = await axios.get('/api/v1/profile/', {\r\n        headers: { Authorization: `Token ${token}` },\r\n      });\r\n      setProfile(res.data);\r\n    } catch {\r\n      setError('Failed to load profile.');\r\n    }\r\n  };\r\n\r\n  const fetchRSVPs = async () => {\r\n    try {\r\n      const res = await axios.get(`/api/v1/attendance/`, {\r\n        headers: { Authorization: `Token ${token}` },\r\n        params: { search, ordering, page }\r\n      });\r\n      setRsvps(res.data.results);\r\n      setCount(res.data.count);\r\n    } catch {\r\n      setError('Failed to load RSVP history.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchRSVPs();\r\n  }, [search, ordering, page]);\r\n\r\n  const totalPages = Math.ceil(count / 10);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"container py-4\">\r\n        <h2 className=\"text-center mb-4\" style={{ color: '#4B0082' }}>My Profile</h2>\r\n\r\n        {error && <p className=\"text-danger text-center\">{error}</p>}\r\n\r\n        {profile && (\r\n          <div className=\"card shadow-sm mx-auto mb-5\" style={{ maxWidth: '400px' }}>\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\" style={{ color: '#4B0082' }}>Hello, {profile.username}</h5>\r\n              <p className=\"card-text\"><strong>Email:</strong> {profile.email}</p>\r\n              <p className=\"card-text\"><strong>User ID:</strong> {profile.id}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control w-50\"\r\n            placeholder=\"Search RSVPs...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            style={{ borderColor: '#4B0082' }}\r\n          />\r\n          <select\r\n            className=\"form-select w-25 ms-3\"\r\n            value={ordering}\r\n            onChange={(e) => setOrdering(e.target.value)}\r\n          >\r\n            <option value=\"event__start_time\">Sort: Start Time ↑</option>\r\n            <option value=\"-event__start_time\">Sort: Start Time ↓</option>\r\n            <option value=\"event__title\">Sort: Title A-Z</option>\r\n            <option value=\"-event__title\">Sort: Title Z-A</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          {rsvps.map((entry) => (\r\n            <div className=\"col-md-6 col-lg-4 mb-3\" key={entry.id}>\r\n              <div className=\"card h-100 border-0 shadow-sm\">\r\n                <div className=\"card-body\">\r\n                  <h5 className=\"card-title\" style={{ color: '#4B0082' }}>\r\n                    {entry.event?.title}\r\n                  </h5>\r\n                  <p className=\"card-text text-muted\">{entry.event?.description}</p>\r\n                  <span className=\"badge bg-secondary\">\r\n                    {entry.event?.start_time} → {entry.event?.end_time}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {!rsvps.length && (\r\n            <p className=\"text-center text-muted\">No RSVP history yet.</p>\r\n          )}\r\n        </div>\r\n\r\n        {totalPages > 1 && (\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <nav>\r\n              <ul className=\"pagination\">\r\n                {[...Array(totalPages)].map((_, i) => (\r\n                  <li key={i} className={`page-item ${page === i + 1 ? 'active' : ''}`}>\r\n                    <button className=\"page-link\" onClick={() => setPage(i + 1)}>\r\n                      {i + 1}\r\n                    </button>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </nav>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}